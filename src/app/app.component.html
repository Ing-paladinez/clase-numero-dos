<h1>Formulario dinámico con Engine Mode</h1>

<form [formGroup]="formulario" (ngSubmit)="enviar()">
  <button type="button" (click)="agregarNombre()">➕ Agregar nombre</button>

  <!-- Importante: contenedor con formArrayName -->
  <div formArrayName="nombres">
    <ul>
      <li *ngFor="let _ of nombres.controls; let i = index">
        <!-- Aquí usamos formControlName con el índice -->
        <input [formControlName]="i" placeholder="Escribe un nombre" />
        <button type="button" (click)="eliminarNombre(i)">❌ Eliminar</button>

        <small class="error"
          *ngIf="nombres.at(i).invalid && nombres.at(i).touched">
          El nombre es obligatorio
        </small>
      </li>
    </ul>
  </div>

  <button type="submit">✅ Enviar</button>
  
</form>

<hr />
<p><strong>Resultado del formulario:</strong></p>
<pre>{{ resultado | json }}</pre>

<hr />
<p><strong>Valor actual del formulario:</strong></p>
<pre>{{ formulario.value | json }}</pre>



